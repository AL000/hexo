<p>Hexo has powerful plugin system. Most of built-in plugins are extensions of Hexo. This makes you easy to hook up your custom code easily.</p>
<p>There&#39;re 2 ways to extend Hexo: <strong>Script</strong> and <strong>Plugin</strong>. If your code is simple and doesn&#39;t have any dependencies, you can choose <strong>Script</strong>. If your code is complicated and have dependencies, or you want to publish it on NPM registry, you should use <strong>Plugin</strong>.</p>
<h3>Script</h3>
<p>To use script, put your JavaScript file in <code>scripts</code> folder and it&#39;ll be loaded once Hexo is initialized.</p>
<h3>Plugin</h3>
<p>To use plugin, create a new folder. The folder name must <code>hexo-</code> prefixed so it could be loaded by Hexo. The folder must contained 2 files at least. One is your code and the other is <code>package.json</code>.</p>
<figure class="highlight lang-plain"><pre>.
├── index.js
└── package.json
</pre></figure>

<p>You should at least describe <code>name</code>, <code>version</code>, <code>main</code> and <code>dependencies</code> in <code>package.json</code>. For example:</p>
<figure class="highlight lang-json"><pre>{
  "<span class="attribute">name</span>": <span class="value"><span class="string">"hexo-my-plugin"</span></span>,
  "<span class="attribute">version</span>": <span class="value"><span class="string">"0.0.1"</span></span>,
  "<span class="attribute">main</span>": <span class="value"><span class="string">"index"</span></span>,
  "<span class="attribute">dependencies</span>": <span class="value">{
  }
}</span>
</pre></figure>

<p>Hexo has 10 categories of plugins:</p>
<ol>
<li>Generator</li>
<li>Renderer</li>
<li>Helper</li>
<li>Deployer</li>
<li>Processor</li>
<li>Tag</li>
<li>Console</li>
<li>Migrator</li>
<li>Filter</li>
<li>Swig</li>
</ol>
<h2>Generator</h2>
<p>Generator generates content based on processed source files.</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>extend.generator.register(<span class="keyword">function</span>(locals, render, callback){
  <span class="comment">// ...</span>
});
</pre></figure>

<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>locals</code></td>
<td><a href="variables.html">Site variables</a></td>
</tr>
<tr>
<td><code>render</code></td>
<td>Render function</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Callback function</td>
</tr>
</tbody>
</table>
<h3>Render</h3>
<p>To render your content with theme, you have to use render function.</p>
<figure class="highlight lang-js"><pre>render(path, layout, locals)
</pre></figure>

<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td>URL without root URL</td>
</tr>
<tr>
<td><code>layout</code></td>
<td>Theme layout to use. This value can be an array or a string. When it‘s an array, Hexo’ll use the first matched layout.</td>
</tr>
<tr>
<td><code>locals</code></td>
<td>Page variables</td>
</tr>
</tbody>
</table>
<p>If you don&#39;t need to render your content with theme. You can bind the content on the routes directly. For example:</p>
<figure class="highlight lang-js"><pre>route.set(<span class="string">'feed.xml'</span>, content);
</pre></figure>

<h3>Example</h3>
<figure class="highlight lang-js"><pre>hexo.extend.generator.register(<span class="keyword">function</span>(locals, render, callback){
  render(<span class="string">'archive.html'</span>, [<span class="string">'archive'</span>, <span class="string">'index'</span>], locals);
  callback();
});
</pre></figure>

<h2>Renderer</h2>
<p>If you want to use a new markup language in Hexo, you can implement it with renderer plugin.</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.renderer.register(name, output, fn, [sync]);
</pre></figure>

<table>
<thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Input file extension (lowercase, not included <code>.</code>)</td>
</tr>
<tr>
<td><code>output</code></td>
<td>Output file extension (lowercase, not included <code>.</code>)</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Render function</td>
</tr>
<tr>
<td><code>sync</code></td>
<td>Sync mode (<code>false</code> by default)</td>
</tr>
</tbody>
</table>
<p><code>fn</code> is invoked with 3 arguments:</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data</code></td>
<td><code>data</code> contains 2 properties: <code>path</code> (File path) and <code>text</code> (File content). <code>path</code> doesn&#39;t always exist in sync mode.</td>
</tr>
<tr>
<td><code>options</code></td>
<td>Options or local variables.</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Callback function. Only used in async mode.</td>
</tr>
</tbody>
</table>
<h3>Example</h3>
<p><strong>Sync mode:</strong></p>
<figure class="highlight lang-js"><pre><span class="keyword">var</span> ejs = require(<span class="string">'ejs'</span>);

hexo.extend.renderer.register(<span class="string">'ejs'</span>, <span class="string">'html'</span>, <span class="keyword">function</span>(data, options){
  options.filename = data.path;
  <span class="keyword">return</span> ejs.render(data.text, options);
}, <span class="literal">true</span>);
</pre></figure>

<p><strong>Async mode:</strong></p>
<figure class="highlight lang-js"><pre><span class="keyword">var</span> stylus = require(<span class="string">'stylus'</span>);

hexo.extend.renderer.register(<span class="string">'styl'</span>, <span class="string">'css'</span>, <span class="keyword">function</span>(data, callback){
  stylus(data.text).set(<span class="string">'filename'</span>, data.path).render(callback);
});
</pre></figure>

<h2>Helper</h2>
<p>Helper is used in theme to help you insert specified content quickly. If you write something in your theme many times. You should consider to put it in the helper. (Don&#39;t repeat yourself, right?)</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.helper.register(name, fn);
</pre></figure>

<table>
<thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Helper name</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Helper function</td>
</tr>
</tbody>
</table>
<h3>Example</h3>
<figure class="highlight lang-js"><pre>hexo.extend.helper.register(<span class="string">'js'</span>, <span class="keyword">function</span>(path){
  <span class="keyword">return</span> <span class="string">'&lt;script type="text/javascript" src="'</span> + path + <span class="string">'"&gt;&lt;/script&gt;'</span>;
});
</pre></figure>

<p>Input:</p>
<figure class="highlight lang-js"><pre>&lt;%- js(<span class="string">'script.js'</span>) %&gt;
</pre></figure>

<p>Output:</p>
<figure class="highlight"><pre><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"script.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></figure>

<h2>Deployer</h2>
<p>Deployer plugin helps you deploy your site on web without complicated commands.</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.deployer.register(name, fn);
</pre></figure>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Deployer name</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Deployer function</td>
</tr>
</tbody>
</table>
<h2>Processor</h2>
<p>Processor processes raw data and stores them in database. If you want to process some specified files in <code>source</code> folder. You can implement it with the processor plugin.</p>
<blockquote class="note info"><strong class="note-title">Hidden files won't be processed</strong><p>Hexo won&#39;t process hidden files.</p>
</blockquote>


<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.processor.register([rule], fn);
</pre></figure>

<table>
<thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rule</code></td>
<td>File path matching rule. This value can be a regular expression or a string.</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Processor function</td>
</tr>
</tbody>
</table>
<p><code>fn</code> is invoked with 2 arguments:</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>file</code></td>
<td>File data (see below)</td>
</tr>
<tr>
<td><code>callback</code></td>
<td>Callback function</td>
</tr>
</tbody>
</table>
<h3>File data</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source</code></td>
<td>File source</td>
</tr>
<tr>
<td><code>path</code></td>
<td>File relative path</td>
</tr>
<tr>
<td><code>type</code></td>
<td>File event. The value can be <code>create</code>, <code>update</code> or <code>delete</code>.</td>
</tr>
<tr>
<td><code>read</code></td>
<td>Function to read file content</td>
</tr>
<tr>
<td><code>stat</code></td>
<td>Function to read file status</td>
</tr>
</tbody>
</table>
<p><strong>Read file content:</strong></p>
<figure class="highlight lang-js"><pre>file.read(options, callback);
</pre></figure>

<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cache</code></td>
<td>Enables cache</td>
<td>false</td>
</tr>
<tr>
<td><code>encoding</code></td>
<td>File encoding</td>
<td>utf8</td>
</tr>
</tbody>
</table>
<p><code>callback</code> is invoked with 2 arguments: error and file content.</p>
<p><strong>Read file status:</strong></p>
<figure class="highlight lang-js"><pre>file.stat(callback);
</pre></figure>

<p><code>callback</code> is invoked with 2 arguments: error and file status (<a href="http://nodejs.org/api/fs.html#fs_class_fs_stats" target="_blank">fs.Stats</a>).</p>
<h2>Tag</h2>
<p>Tag helps you insert specified content in your post quickly.</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.tag.register(name, fn, [ends]);
</pre></figure>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Tag name</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Tag function</td>
</tr>
<tr>
<td><code>ends</code></td>
<td>Enables end tag (disabled by default)</td>
</tr>
</tbody>
</table>
<p><code>fn</code> is invoked with 2 arguments:</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>args</code></td>
<td>Arguments</td>
</tr>
<tr>
<td><code>content</code></td>
<td>Content (Only available when the tag has end tag)</td>
</tr>
</tbody>
</table>
<h3>Example</h3>
<p><strong>Without end tag:</strong> Inserts a Youtube video.</p>
<figure class="highlight lang-js"><pre>hexo.extend.tag.register(<span class="string">'youtube'</span>, <span class="keyword">function</span>(args, content){
  <span class="keyword">var</span> id = args[<span class="number">0</span>];
  <span class="keyword">return</span> <span class="string">'&lt;div class="video-container"&gt;&lt;iframe width="560" height="315" src="http://www.youtube.com/embed/'</span> + id + <span class="string">'" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;&lt;/div&gt;'</span>;
});
</pre></figure>

<p><strong>With end tag:</strong> Inserts a pull quote.</p>
<figure class="highlight lang-js"><pre>hexo.extend.tag.register(<span class="string">'pullquote'</span>, <span class="keyword">function</span>(args, content){
  <span class="keyword">var</span> className = args.length ? <span class="string">' '</span> + args.join(<span class="string">' '</span>) : <span class="string">''</span>;
  <span class="keyword">return</span> <span class="string">'&lt;blockquote class="pullquote'</span> + className + <span class="string">'"&gt;'</span> + content + <span class="string">'&lt;/blockquote&gt;'</span>;
}, <span class="literal">true</span>);
</pre></figure>

<h2>Console</h2>
<p>Console is the interface between Hexo and you.</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.console.register(name, desc, [options], fn);
</pre></figure>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Console name (lowercase)</td>
</tr>
<tr>
<td><code>desc</code></td>
<td>Console description</td>
</tr>
<tr>
<td><code>options</code></td>
<td>Options</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Console function. Invoked with a <a href="https://github.com/substack/node-optimist" target="_blank">Optimist</a> argument.</td>
</tr>
</tbody>
</table>
<h3>Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>init</code></td>
<td>Display in a non-Hexo folder</td>
</tr>
<tr>
<td><code>debug</code></td>
<td>Display in debug mode</td>
</tr>
<tr>
<td><code>alias</code></td>
<td>Console alias</td>
</tr>
</tbody>
</table>
<h3>Example</h3>
<figure class="highlight lang-bash"><pre>$ hexo config
</pre></figure>

<figure class="highlight lang-js"><pre>hexo.extend.console.register(<span class="string">'config'</span>, <span class="string">'Display configuration'</span>, <span class="keyword">function</span>(args){
  console.log(hexo.config);
});
</pre></figure>

<h2>Migrator</h2>
<p>Migrator helps you migrate from other blog system to Hexo.</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.migrator.register(name, fn);
</pre></figure>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Migrator name</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Migrator function. Invoked with a <a href="https://github.com/substack/node-optimist" target="_blank">Optimist</a> argument.</td>
</tr>
</tbody>
</table>
<h2>Filter</h2>
<p>There&#39;re 2 type of filters: <strong>pre-filter</strong> process uncompiled data, while <strong>post-filter</strong> process compiled data.</p>
<p><img src="http://i.minus.com/ibws9s60LP8sDG.PNG" alt=""></p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.filter.register([type], fn);
</pre></figure>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>Filter type. The value can be <code>pre</code> or <code>post</code> (Default).</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Filter function. Invoked with a argument: post data.</td>
</tr>
</tbody>
</table>
<h3>Example</h3>
<p>Replaces <code>#username</code> in post content to a Twitter link.</p>
<figure class="highlight lang-js"><pre>hexo.extend.filter.register(<span class="string">'post'</span>, <span class="keyword">function</span>(data){
  data.content = data.content.replace(<span class="regexp">/#(\d+)/</span>, <span class="string">'&lt;a href="http://twitter.com/$1"&gt;#$1&lt;/a&gt;'</span>);

  <span class="keyword">return</span> data;
});
</pre></figure>

<h2>Swig</h2>
<p>You can extend Swig tags with Swig plugin. The API is same as Swig. You can find more detail <a href="http://paularmstrong.github.io/swig/docs/#tags" target="_blank">here</a>.</p>
<h3>Syntax</h3>
<figure class="highlight lang-js"><pre>hexo.extend.swig.register(name, fn, [end]);
</pre></figure>

<table>
<thead>
<tr>
<th>Paramter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Plugin name</td>
</tr>
<tr>
<td><code>fn</code></td>
<td>Plugin function</td>
</tr>
<tr>
<td><code>end</code></td>
<td>Enables end tag (disabled by default)</td>
</tr>
</tbody>
</table>
